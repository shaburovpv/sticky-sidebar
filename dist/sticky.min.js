/**
 * sticky-sidebar - A JavaScript plugin for making smart and high performance.
 * @version v3.3.1
 * @link https://github.com/shaburovpv/sticky-sidebar
 * @author Ahmed Bouhuolia
 * @license The MIT License (MIT)
**/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.StickySidebar=t()}(this,function(){"use strict";"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function e(t,i,n){var s,o,r,a,l;function p(){var e=Date.now()-a;e<i&&0<=e?s=setTimeout(p,i-e):(s=null,n||(l=t.apply(r,o),r=o=null))}null==i&&(i=100);function e(){r=this,o=arguments,a=Date.now();var e=n&&!s;return s=s||setTimeout(p,i),e&&(l=t.apply(r,o),r=o=null),l}return e.clear=function(){s&&(clearTimeout(s),s=null)},e.flush=function(){s&&(l=t.apply(r,o),r=o=null,clearTimeout(s),s=null)},e}var t,i,n=e.debounce=e,s=(function(e,t){(function(e,n){function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0});var h,o,t=(o={topSpacing:0,bottomSpacing:0,container:!(h=".stickySidebar"),innerWrapper:".inner-wrapper-sticky",stickyClass:"is-affixed",resizeSensor:!0,minWidth:0},function(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),e}(d,[{key:"initialize",value:function(){var t=this;if(this._setSupportFeatures(),this.options.innerWrapper&&("string"==typeof this.options.innerWrapper?(this.sidebarInner=this.sidebar.querySelector(this.options.innerWrapper),null===this.sidebarInner&&(this.sidebarInner=!1)):this.sidebarInner=this.options.innerWrapper),!this.sidebarInner){var e=document.createElement("div");for(e.setAttribute("class","inner-wrapper-sticky"),this.sidebar.appendChild(e);this.sidebar.firstChild!==e;)e.appendChild(this.sidebar.firstChild);this.sidebarInner=e}if(this.options.container)if("string"==typeof this.options.container){var i=document.querySelectorAll(this.options.container);if((i=Array.prototype.slice.call(i)).forEach(function(e){e.contains(t.sidebar)&&(t.container=e)}),!i.length)throw new Error("The container does not contains on the sidebar.")}else this.container=this.options.container;"function"!=typeof this.options.topSpacing&&(this.options.topSpacing=parseInt(this.options.topSpacing)||0),"function"!=typeof this.options.bottomSpacing&&(this.options.bottomSpacing=parseInt(this.options.bottomSpacing)||0),this._widthBreakpoint(),this.calcDimensions(),this.stickyPosition(),this.bindEvents(),this._initialized=!0,this._enabled=!0}},{key:"bindEvents",value:function(){this.eventBinded||(this.eventBinded=!0,window.addEventListener("resize",this.handleEventDebounce,{passive:!0,capture:!1}),this.addScrollEvent(),this.sidebar.addEventListener("update"+h,this.handleEvent),d.supportResizeObserver()?(this.resizeObserver.observe(this.sidebarInner),this.resizeObserver.observe(this.container)):this.options.resizeSensor&&"undefined"!=typeof ResizeSensor&&(new ResizeSensor(this.sidebarInner,this.handleEventDebounce),new ResizeSensor(this.container,this.handleEventDebounce)))}},{key:"removeEvents",value:function(){this.eventBinded=!1,this.handleEventDebounce.clear(),window.removeEventListener("resize",this.handleEventDebounce),this.removeScrollEvent(),this.sidebar.removeEventListener("update"+h,this.handleEvent),d.supportResizeObserver()?(this.resizeObserver.unobserve(this.sidebarInner),this.resizeObserver.unobserve(this.container)):this.options.resizeSensor&&"undefined"!=typeof ResizeSensor&&(ResizeSensor.detach(this.sidebarInner,this.handleEventDebounce),ResizeSensor.detach(this.container,this.handleEventDebounce))}},{key:"addScrollEvent",value:function(){this.isScrollEventAdded||(window.addEventListener("scroll",this.handleEvent,{passive:!0,capture:!1}),this.isScrollEventAdded=!0)}},{key:"removeScrollEvent",value:function(){this.isScrollEventAdded&&(window.removeEventListener("scroll",this.handleEvent,{capture:!1}),this.isScrollEventAdded=!1)}},{key:"handleEvent",value:function(e){this.updateSticky(e)}},{key:"calcDimensions",value:function(){if(!this._breakpoint){var e=this.dimensions;this.resetStyles(),e.containerTop=d.offsetRelative(this.container).top,e.containerHeight=this.container.clientHeight,e.containerInnerHeight=parseInt(window.getComputedStyle(this.container).height,10),e.containerBottom=e.containerTop+e.containerHeight,e.sidebarTop=d.offsetRelative(this.sidebarInner).top,e.sidebarHeight=this.sidebarInner.offsetHeight,e.sidebarWidth=this.sidebarInner.offsetWidth,e.viewportHeight=window.innerHeight,e.maxTranslateY=e.containerHeight-e.sidebarHeight,this._calcDimensionsWithScroll()}}},{key:"_calcDimensionsWithScroll",value:function(){var e=this.dimensions;e.containerInnerHeight!==e.sidebarHeight&&(e.sidebarLeft=d.offsetRelative(this.sidebar).left,e.viewportTop=document.documentElement.scrollTop||document.body.scrollTop,e.viewportBottom=e.viewportTop+e.viewportHeight,e.viewportLeft=document.documentElement.scrollLeft||document.body.scrollLeft,e.topSpacing=this.options.topSpacing,e.bottomSpacing=this.options.bottomSpacing,"function"==typeof e.topSpacing&&(e.topSpacing=parseInt(e.topSpacing(this.sidebar))||0),"function"==typeof e.bottomSpacing&&(e.bottomSpacing=parseInt(e.bottomSpacing(this.sidebar))||0),"VIEWPORT-TOP"===this.affixedType?e.topSpacing<e.lastTopSpacing&&(e.translateY+=e.lastTopSpacing-e.topSpacing,this._reStyle=!0):"VIEWPORT-BOTTOM"===this.affixedType&&e.bottomSpacing<e.lastBottomSpacing&&(e.translateY+=e.lastBottomSpacing-e.bottomSpacing,this._reStyle=!0),e.lastTopSpacing=e.topSpacing,e.lastBottomSpacing=e.bottomSpacing)}},{key:"isSidebarFitsViewport",value:function(){var e=this.dimensions,t="down"===this.scrollDirection?e.lastBottomSpacing:e.lastTopSpacing;return this.dimensions.sidebarHeight+t<this.dimensions.viewportHeight}},{key:"observeScrollDir",value:function(){var e=this.dimensions;if(e.lastViewportTop!==e.viewportTop){var t="down"===this.direction?Math.min:Math.max;e.viewportTop===t(e.viewportTop,e.lastViewportTop)&&(this.direction="down"===this.direction?"up":"down")}}},{key:"getAffixType",value:function(e){var t=0<arguments.length&&void 0!==e&&e;this._calcDimensionsWithScroll();var i=this.dimensions,n=i.viewportTop+i.topSpacing,s=this.affixedType;return s=n<=i.sidebarTop||i.containerHeight<=i.sidebarHeight?(i.translateY=0,"STATIC"):t?this._getAffixTypeScrollingDown():"up"===this.direction?this._getAffixTypeScrollingUp():this._getAffixTypeScrollingDown(),i.translateY=Math.max(0,i.translateY),i.translateY=Math.min(i.containerHeight,i.translateY),i.translateY=Math.round(i.translateY),i.lastViewportTop=i.viewportTop,s}},{key:"_getAffixTypeScrollingDown",value:function(){var e=this.dimensions,t=e.sidebarHeight+e.sidebarTop,i=e.viewportTop+e.topSpacing,n=e.viewportBottom-e.bottomSpacing,s=this.affixedType;return this.isSidebarFitsViewport()?e.sidebarHeight+i>=e.containerBottom?(e.translateY=e.containerBottom-t,s="CONTAINER-BOTTOM"):i>=e.sidebarTop&&(e.translateY=i-e.sidebarTop,s="VIEWPORT-TOP"):e.containerBottom<=n?(e.translateY=e.containerBottom-t,s="CONTAINER-BOTTOM"):t+e.translateY<=n?(e.translateY=n-t,s="VIEWPORT-BOTTOM"):e.sidebarTop+e.translateY<=i&&0!==e.translateY&&e.maxTranslateY!==e.translateY&&(s="VIEWPORT-UNBOTTOM"),s}},{key:"_getAffixTypeScrollingUp",value:function(){var e=this.dimensions,t=e.sidebarHeight+e.sidebarTop,i=e.viewportTop+e.topSpacing,n=e.viewportBottom-e.bottomSpacing,s=this.affixedType;return i<=e.translateY+e.sidebarTop?(e.translateY=i-e.sidebarTop,s="VIEWPORT-TOP"):e.containerBottom<=n?(e.translateY=e.containerBottom-t,s="CONTAINER-BOTTOM"):this.isSidebarFitsViewport()||e.sidebarTop<=i&&0!==e.translateY&&e.maxTranslateY!==e.translateY&&(s="VIEWPORT-UNBOTTOM"),s}},{key:"_getStyle",value:function(e){if(void 0!==e){var t={inner:{},outer:{}},i=this.dimensions;switch(e){case"VIEWPORT-TOP":t.inner={position:"fixed",top:i.topSpacing,left:i.sidebarLeft-i.viewportLeft,width:i.sidebarWidth};break;case"VIEWPORT-BOTTOM":t.inner={position:"fixed",top:"auto",left:i.sidebarLeft,bottom:i.bottomSpacing,width:i.sidebarWidth};break;case"CONTAINER-BOTTOM":case"VIEWPORT-UNBOTTOM":var n=this._getTranslate(0,i.translateY+"px");t.inner=n?{transform:n}:{position:"absolute",top:i.translateY,width:i.sidebarWidth}}switch(e){case"VIEWPORT-TOP":case"VIEWPORT-BOTTOM":case"VIEWPORT-UNBOTTOM":case"CONTAINER-BOTTOM":t.outer={height:i.sidebarHeight,position:"relative"}}return t.outer=d.extend({height:"",position:""},t.outer),t.inner=d.extend({position:"relative",top:"",left:"",bottom:"",width:"",transform:""},t.inner),t}}},{key:"stickyPosition",value:function(e){var t=0<arguments.length&&void 0!==e&&e,i=this.dimensions;if(!this._breakpoint)if(i.containerInnerHeight<=i.sidebarHeight)this.removeScrollEvent();else{this.addScrollEvent(),t=this._reStyle||t||!1,this.options.topSpacing,this.options.bottomSpacing;var n=this.getAffixType(t),s=this._getStyle(n);if((this.affixedType!==n||t)&&n){var o="affix."+n.toLowerCase().replace("viewport-","")+h;for(var r in d.eventTrigger(this.sidebar,o),"STATIC"===n?d.removeClass(this.sidebar,this.options.stickyClass):d.addClass(this.sidebar,this.options.stickyClass),s.outer){var a="number"==typeof s.outer[r]?"px":"";this.sidebar.style[r]=s.outer[r]+a}for(var l in s.inner){var p="number"==typeof s.inner[l]?"px":"";this.sidebarInner.style[l]=s.inner[l]+p}var c="affixed."+n.toLowerCase().replace("viewport-","")+h;d.eventTrigger(this.sidebar,c)}else this._initialized&&(this.sidebarInner.style.left=s.inner.left);this.affixedType=n}}},{key:"_widthBreakpoint",value:function(){window.innerWidth<=this.options.minWidth?(this._breakpoint=!0,this.affixedType="STATIC",this.sidebar.removeAttribute("style"),d.removeClass(this.sidebar,this.options.stickyClass),this.sidebarInner.removeAttribute("style")):this._breakpoint=!1}},{key:"updateSticky",value:function(e){var t,i=this,n=0<arguments.length&&void 0!==e?e:{type:"resize"};this._enabled&&!this._running&&(this._running=!0,t=n.type,requestAnimationFrame(function(){if(i._enabled){switch(t){case"scroll":i._calcDimensionsWithScroll(),i.observeScrollDir(),i.stickyPosition();break;case"resize":default:i._widthBreakpoint(),i.calcDimensions(),i.stickyPosition(!0),i.bindEvents()}i._running=!1}else i._running=!1}))}},{key:"_setSupportFeatures",value:function(){this.support.transform=d.supportTransform()}},{key:"_getTranslate",value:function(e,t){var i=0<arguments.length&&void 0!==e?e:0,n=1<arguments.length&&void 0!==t?t:0;return!!this.support.transform&&"translate("+i+", "+n+")"}},{key:"restart",value:function(){this._enabled=!0,this.updateSticky()}},{key:"destroy",value:function(){this._enabled=!1,this.sidebar.classList.remove(this.options.stickyClass),this.sidebar.style.minHeight="",this.resetStyles(),this.removeEvents()}},{key:"resetStyles",value:function(){var e={inner:{},outer:{}};for(var t in e.inner={position:"",top:"",left:"",bottom:"",width:"",transform:""},e.outer={height:"",position:""},e.outer)this.sidebar.style[t]=e.outer[t];for(var i in e.inner)this.sidebarInner.style[i]=e.inner[i]}}],[{key:"supportTransform",value:function(e){var i=!1,t=e?"perspective":"transform",n=t.charAt(0).toUpperCase()+t.slice(1),s=document.createElement("support").style;return(t+" "+["Webkit","Moz","O","ms"].join(n+" ")+n).split(" ").forEach(function(e,t){i||void 0===s[e]||(i=e)}),i}},{key:"supportResizeObserver",value:function(){return"ResizeObserver"in window}},{key:"eventTrigger",value:function(e,t,i){try{var n=new CustomEvent(t,{detail:i})}catch(e){(n=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,i)}e.dispatchEvent(n)}},{key:"extend",value:function(e,t){var i={};for(var n in e)void 0!==t[n]?i[n]=t[n]:i[n]=e[n];return i}},{key:"offsetRelative",value:function(e){var t=e.getBoundingClientRect(),i=document.documentElement;return{top:t.top+window.pageYOffset-i.clientTop,left:t.left+window.pageXOffset-i.clientLeft}}},{key:"addClass",value:function(e,t){d.hasClass(e,t)||(e.classList?e.classList.add(t):e.className+=" "+t)}},{key:"removeClass",value:function(e,t){d.hasClass(e,t)&&(e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," "))}},{key:"hasClass",value:function(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}},{key:"defaults",get:function(){return o}}]),d);function d(e){var t=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),this.options=d.extend(o,i),this.sidebar="string"==typeof e?document.querySelector(e):e,void 0===this.sidebar)throw new Error("There is no specific sidebar element.");this.sidebarInner=!1,this.container=this.sidebar.parentElement,this.affixedType="STATIC",this.direction="down",this.support={transform:!1,transform3d:!1},this._initialized=!1,this._reStyle=!1,this._breakpoint=!1,this.dimensions={translateY:0,maxTranslateY:0,topSpacing:0,lastTopSpacing:0,bottomSpacing:0,lastBottomSpacing:0,sidebarTop:0,sidebarHeight:0,sidebarWidth:0,containerTop:0,containerHeight:0,viewportHeight:0,viewportTop:0,lastViewportTop:0},this.handleEvent=this.handleEvent.bind(this),this.handleEventDebounce=(0,n.debounce)(this.handleEvent,100),d.supportResizeObserver()&&(this.resizeObserver=new ResizeObserver(function(){t.handleEventDebounce()})),this.initialize()}e.default=t,window.StickySidebar=t})(t,n)}(t={exports:{}},t.exports),t.exports);return(i=s)&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i});